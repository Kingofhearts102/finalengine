(function(a){var b=function(f,d,c,g){this._img=new Image();this._img.src=f;var f=new Image();var e=this;f.onload=function(j){var h=document.createElement("canvas");var i=h.getContext("2d");h.width=this.width;h.height=this.height;i.drawImage(this,0,0);e._heightData=i.getImageData(0,0,this.width,this.height).data;};f.src=imageURL;this._height=c;this._width=d;this._depth=g;this._minW=-d+d/2;this._maxW=d/2;this._minH=-c+c/2;this._maxH=c/2;};a.extend(b,a.ITerrain);b.prototype._img=null;b.prototype._width=null;b.prototype._height=null;b.prototype._depth=null;b.prototype._minW=null;b.prototype._minH=null;b.prototype._maxW=null;b.prototype._maxH=null;b.prototype._heightData=null;b.prototype.get_minW=function(){return this._minW;};b.prototype.get_minH=function(){return this._minH;};b.prototype.get_maxW=function(){return this._maxW;};b.prototype.get_maxH=function(){return this._maxH;};b.prototype.get_dw=function(){return this._width/this._img.width;};b.prototype.get_dh=function(){return this._height/this._img.height;};b.prototype.get_sw=function(){return this._img.width;};b.prototype.get_sh=function(){return this._img.height;};b.prototype.get_heights=function(d,c){if(this._heightData){return(this._heightData[(this._img.width*(d|0)+(c|0))*4])/255*this._depth;}else{return this._depth;}};a.JImageTerrain=b;})(jigLib);